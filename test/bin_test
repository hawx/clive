#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
require 'clive'

options = {}
c = Clive.new do

  switch(:v, :verbose, "Run verbosely") {
    options[:verbose] = true
  }
  
  flag(:t, :type, "TYPE", "Change type to TYPE") do |i|
    options[:type] = i
  end
  
  flag(:long_only, "A flag with only a long") {}
  
  flag(:p, :print, "[TEXT]", "Print TEXT, defaults to 'hey'") do |i|
    i ||= 'hey'
    p i
  end
  
  flag(:z, :apple, "More applez") {}
  
  command(:add, "Add something") {
    
    header "Usage: bin_test add [options]\n" +
           "Use add to add things to add, which in turn can be added."
    
    switch(:f, :full, "Use full") {
      options[:full] = true
    }  
    
    # Use with app-name add -e
    switch(:e, :empty, "Use empty") {
      options[:full] = false
    }
    
    footer "If the header was a little confusing, don't worry the footer thought so too."
  
  }
  
  command(:remove, :delete, "Get rid of something") {
    switch(:f, :force, "Force") {
      p "deleting! now"
    }   
  }

end

p ARGV
p c.parse(ARGV)
p options

